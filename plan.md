네, 좋습니다. 피드백 주신 내용을 반영하여 데이터 영속성과 인터랙티브 UI, 테스트 계획을 보강한 수정된 개발 계획안입니다.

---

# 자리배치 Streamlit 앱 개발 계획 (v1.1 수정안)

## 1. 기능 개요
- **목표**: 기존 HTML 기반 자리배치 프로그램을 Streamlit으로 변환하여 웹 기반 인터랙티브 앱으로 제공
- **범위**:
  - 학생 명단 입력 및 **파일(JSON/TXT) 기반** 저장/불러오기 기능 (데이터 영속성)
  - 책상 배열 설정 (기본형, 짝꿍형) 및 **시각적 그리드 UI**
  - **인터랙티브 좌석 설정** (클릭을 통한 사전 지정, 좌석 비활성화)
  - 자리 배치 알고리즘 (랜덤 배치, 사전 지정 반영, 자리 띄우기)
  - 교사/학생 기준 보기 전환
  - 엑셀 다운로드 기능
  - 반응형 UI 및 모바일 지원

## 2. 기술 설계
- **아키텍처**: Streamlit 기반 단일 페이지 애플리케이션
- **데이터 모델**:
  - 학생 명단: `List[str]`
  - 자리 배치: `Dict[int, str]` (자리 인덱스: 학생명)
  - 사전 지정: `Dict[int, str]`
  - 비활성화 자리: `List[int]`
  - 자리 띄우기 대상: `List[str]`
- **상태 관리 (State Management)**:
  - `st.session_state`: 앱 실행 중 사용자의 입력(명단, 설정) 및 배치 결과를 실시간으로 관리
  - **파일 I/O**: `data_manager.py`를 통해 학생 명단, 배치 설정을 JSON 파일 등으로 저장(`st.download_button`)하고 불러오는(`st.file_uploader`) 기능 (데이터 영속성 확보)
- **핵심 UI 컴포넌트 (Key UI Components)**:
  - `st.columns` 및 `st.container`: 책상 배열 그리드를 시각적으로 구현 (설정 및 결과 표시에 공통 사용)
  - **단순화된 인터랙션**: 초기에는 `st.selectbox`와 `st.multiselect`를 활용한 간단한 좌석 설정 UI로 시작
  - **점진적 개선**: 기본 기능 완성 후 `streamlit-elements` 또는 커스텀 컴포넌트로 고급 인터랙션 추가

## 3. 변경 파일 목록
- `app.py` (생성) - 메인 Streamlit 애플리케이션 (UI 및 상태 관리)
- `requirements.txt` (생성) - 의존성 패키지 목록
- `README.md` (생성) - 프로젝트 설명 및 실행 방법
- `utils/` 디렉토리 (생성)
  - `seating_algorithm.py` (생성) - 자리 배치 알고리즘 (랜덤, 사전지정, 띄우기)
  - `excel_export.py` (생성) - 엑셀 다운로드 기능
  - `data_manager.py` (생성) - 명단/설정 파일(JSON 등) 저장 및 불러오기 (영속성 관리)

## 4. 구현 단계 (Step-by-Step)
- **1단계**: 프로젝트 구조 설정 및 기본 의존성 설치
  - `requirements.txt` 생성
  - 기본 디렉토리 구조 생성 (`utils/` 포함)
  - `app.py` 기본 Streamlit 설정

- **2단계**: 핵심 UI 컴포넌트 구현
  - 명단 입력 섹션 (`st.text_area`)
  - 책상 배열 설정 섹션 (`st.number_input`으로 가로/세로 입력)
  - **동적 좌석 그리드 생성**: `st.columns`와 `st.container`를 사용해 설정된 배열을 시각화
  - **단순화된 좌석 설정 UI**: `st.selectbox`로 사전 지정 학생 선택, `st.multiselect`로 비활성화 좌석 선택하는 방식으로 시작

- **3단계**: 자리 배치 알고리즘 구현 (`utils/seating_algorithm.py`)
  - 기본 랜덤 배치
  - 사전 지정 기능 (2단계 UI에서 설정된 값 반영)
  - 자리 띄우기 알고리즘 (인접 좌석 회피 로직)

- **4단계**: 고급 기능 구현
  - 교사/학생 기준 보기 전환
  - 엑셀 다운로드 기능 (`utils/excel_export.py` 연동)
  - **데이터 영속성 구현**: 명단 및 배치 설정(사전 지정, 비활성화 자리)을 JSON 파일로 저장(`st.download_button`)하고 불러오는(`st.file_uploader`) 기능 (`utils/data_manager.py` 연동)

- **5단계**: UI/UX 개선 및 최적화
  - 반응형 레이아웃 조정 (모바일 환경 고려)
  - 배치 시 간단한 애니메이션 효과 (예: `st.spinner`)
  - 사용자 가이드 (`st.expander` 활용)
  - **고급 인터랙션 추가**: 기본 기능 안정화 후 클릭 기반 좌석 설정 UI로 업그레이드

## 5. 테스트 계획
- **단위 테스트 (Unit Tests)**:
  - `seating_algorithm.py` 내 알고리즘 함수 (기본 랜덤, 사전 지정)
  - **(중점)** '자리 띄우기' 알고리즘 엣지 케이스 (대상이 너무 많아 배치가 불가능한 경우, 인접성 판단 로직 등)
  - `excel_export.py` 엑셀 생성 로직
  - `data_manager.py` 데이터 변환 (JSON 직렬화/역직렬화)
- **통합 테스트 (Integration Tests)**:
  - (UI) 단순화된 좌석 설정 -> (로직) 사전 지정 상태 변경 -> (결과) 배치 알고리즘 반영
  - (UI) 파일 업로드 -> (로직) `data_manager` 파싱 -> (UI) 명단/설정 반영
  - 전체 자리 배치 플로우 및 엑셀 다운로드
  - **모바일 반응형 테스트**: 다양한 화면 크기에서의 UI 동작 확인
- **사용자 시나리오 테스트 (Scenario Tests)**:
  - 일반적인 학급 자리 배치 시나리오
  - 1~2명 사전 지정 및 3~4개 좌석 비활성화가 포함된 복잡한 배치
  - '자리 띄우기' 대상 학생을 지정하여 배치 결과 확인

## 6. 기술적 고려사항 및 위험 관리

### **주요 기술적 도전과제**
- **Streamlit 상태 관리 한계**: 복잡한 인터랙티브 그리드 구현 시 성능 이슈 가능성
- **실시간 UI 업데이트**: 클릭 시 즉시 반영되는 인터페이스 구현의 복잡성  
- **모바일 반응형**: Streamlit의 기본 반응형 지원 한계

### **위험 완화 전략**
- **점진적 개발**: 단순한 UI로 시작하여 점진적으로 복잡성 증가
- **성능 최적화**: 대용량 그리드 처리 시 `st.cache_data` 활용
- **대안 준비**: 복잡한 인터랙션이 필요한 경우 `streamlit-elements` 또는 커스텀 컴포넌트 고려